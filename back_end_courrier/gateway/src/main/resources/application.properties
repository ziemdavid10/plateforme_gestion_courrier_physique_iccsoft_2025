spring.application.name=gateway
server.port=8079

# Eureka Configuration
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=localhost
eureka.instance.ip-address=localhost
eureka.instance.instance-id=localhost:${spring.application.name}:${server.port}
eureka.client.service-url.defaultZone=http://root:ziem@localhost:8761/eureka/
eureka.server.enableSelfPreservation=true

# JWT Configuration
jwt.secret=mySecretKey

# Gateway Routes Configuration
# Auth routes (no authentication)
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=lb://demo
spring.cloud.gateway.routes[0].predicates[0]=Path=/v1/api/auth/**

# Admin and Secretary routes (User listing for courrier creation)
spring.cloud.gateway.routes[1].id=admin-users
spring.cloud.gateway.routes[1].uri=lb://iccsoft-user
spring.cloud.gateway.routes[1].predicates[0]=Path=/v1/api/admin/users/**
spring.cloud.gateway.routes[1].filters[0]=RoleBasedAuthorizationFilter=ADMINISTRATEUR,SECRETAIRE

# Secretary-only routes (Courrier CRUD)
spring.cloud.gateway.routes[2].id=secretary-courriers
spring.cloud.gateway.routes[2].uri=lb://iccsoft-courrier
spring.cloud.gateway.routes[2].predicates[0]=Path=/v1/api/secretary/courriers/**
spring.cloud.gateway.routes[2].filters[0]=RoleBasedAuthorizationFilter=SECRETAIRE

# Employee-only routes (Own courriers read/delete)
spring.cloud.gateway.routes[3].id=employee-courriers
spring.cloud.gateway.routes[3].uri=lb://iccsoft-courrier
spring.cloud.gateway.routes[3].predicates[0]=Path=/v1/api/employee/courriers/**
spring.cloud.gateway.routes[3].filters[0]=EmployeeCourrierFilter

# CORS Configuration
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOrigins=http://localhost:4200
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].maxAge=3600
